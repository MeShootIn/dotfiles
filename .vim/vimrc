" PLUGINS {{{

" TODO Auto installation of 'vim-plug' for Neovim by 'Windows (PowerShell)'.
call plug#begin('~/AppData/Local/nvim/plugged')
" Fake text.
Plug 'tkhren/vim-fake'
" Dracula theme.
Plug 'dracula/vim', { 'as': 'dracula' }
call plug#end()

colorscheme dracula

" }}}

" BASICS {{{

" Faster redrawing.
set lazyredraw
set ttyfast
set updatetime=2000

" For integration with Russian layout.
set langmap=ёйцукенгшщзхъфывапролджэячсмитьбюЁЙЦУКЕHГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮ;`qwertyuiop[]asdfghjkl\\;'zxcvbnm\\,.~QWERTYUIOP{}ASDFGHJKL:\\"ZXCVBNM<>

" Show full count of matches.
set shortmess-=S

" For integration with system buffer.
set clipboard+=unnamedplus

" Command line executor.
set shell=bash

" Disable compatibility with 'vi' which can cause unexpected issues.
set nocompatible

" Сertain directories for backups, swaps and undos.
set backupdir=~/.vim/backup
set directory=~/.vim/swap
set noundofile

" Graphic and sound effects.
set novisualbell " Don't blink.
set t_vb= " No flicker.
set visualbell t_vb= " Disable sound.

" Line numbering.
set number
set relativenumber
set ruler " Information about the current row, column, etc.

set termguicolors

" Syntax and files.
syntax on
filetype plugin indent on
set encoding=utf8
set fileencodings=utf8
set ff=unix

" Spell check.
" Useful commands: `]s`, `[s`, `zg`, `z=`.
set nospell " Disabled by default in order to switch later via shortcuts.
set spelllang=en_us,ru_ru
" Usage: move the cursor to the wrong word and press 'z='

" Tabulation.
set autoindent " Copies indents from the current line when adding a new one.
set smartindent " The same as autoindent, but in addition, automatically sets
" indents in the right places.
set tabstop=2 " The number of spaces with which the tab character is displayed
" in the text.
set shiftwidth=2 " To adjust the width of the indents in the spaces added by
" '>>' and '<<' commands.
set softtabstop=2 " The number of spaces that a tab character displays when
" appending.
set expandtab
set smarttab

" Mouse.
set mouse=a
set mousehide " Hide mouse cursor while typing.

" TODO WTF???
" if !has('nvim')
"   set ttymouse=xterm-256color " For integration with Alacritty terminal.
" endif

" Vertical bar.
set colorcolumn=80 " Distance from left edge.
hi ColorColumn ctermbg=red

" Highlight cursor line underneath the cursor horizontally.
set cursorline
" Do not let cursor scroll below or above N number of lines/columns when
" scrolling.
set scrolloff=5
set sidescrolloff=5
" Show partial command you type in the last line of the screen.
set showcmd
" Show the current mode.
set showmode
" Clear status line when config is reloaded.
set statusline=''
set completeopt=menu,menuone,noselect

" Search.
set hlsearch
set incsearch
set showmatch " Show matching words during a search.
set gdefault " Add the 'g' flag to search/replace by default.
set ignorecase
set wildignorecase
set smartcase " If the search pattern contains upper case characters, it will
" search in a case sensitive manner.

set history=1000

" TODO https://www.reddit.com/r/neovim/comments/3v06lo/making_the_background_transparent/
au ColorScheme * hi Normal ctermbg=none guibg=none
au ColorScheme myspecialcolors hi Normal ctermbg=red guibg=red

" }}}

" MAPPINGS {{{

" TODO Make functions for key bindings.

" All modes.
" Disables.
noremap <PageUp> <nop>
noremap! <PageUp> <nop>
noremap <PageDown> <nop>
noremap! <PageDown> <nop>
noremap <Home> <nop>
noremap! <Home> <nop>
noremap <End> <nop>
noremap! <End> <nop>

" Normal mode.
" Stay in indent mode.
nnoremap <silent> > >>
nnoremap <silent> <Tab> >>
nnoremap <silent> < <<
nnoremap <silent> <S-Tab> <<
" Better window navigation (soon).
" nnoremap <silent> <C-h> <C-w>h
" nnoremap <silent> <C-j> <C-w>j
" nnoremap <silent> <C-k> <C-w>k
" nnoremap <silent> <C-l> <C-w>l
" Space as usual.
nnoremap <Space> a<Space><Esc>
" Additional functionality for <Esc>: clear last search highlighting.
nnoremap <Esc> :nohl<CR>
" Adding line breaks directly from Normal mode.
nnoremap <CR> o<Esc>
nnoremap <S-CR> O<Esc>
" Toggle case without moving cursor.
nnoremap t g~l
" I think it's a better solution.
nnoremap <S-u> <C-r>

" Insert mode.
" Additional functionality for <Esc>: clear last search highlighting.
imap <Esc> <Esc>:nohl<CR>

" Visual mode.
" Stay in indent mode.
vnoremap <silent> > >gv
vnoremap <silent> <Tab> >gv
vnoremap <silent> < <gv
vnoremap <silent> <S-Tab> <gv
" Additional functionality for <Esc>: clear last search highlighting.
vmap <Esc> <Esc>:nohl<CR>

" }}}

" MY SNIPPETS {{{

" FIXME Remove after configuration 'L3MON4D3/LuaSnip'.
" Aka 'block comment'.
autocmd FileType vim inoremap <silent> ,bc "  {{{<CR><Esc>cc<CR><CR><CR>" }}}<Esc>kkkkhhi
" Aka 'echo debug'.
autocmd FileType vim inoremap <silent> ,ed echo  \| " DEBUG<Esc>bbbhi

" }}}
